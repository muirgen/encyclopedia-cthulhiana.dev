{% extends "EncyclopediaAdminBundle::layout.html.twig" %}

{% block body %}
<h3><a href="{{ path('_catalogues') }}">Catalogue</a> > Edit : {{ entity.name }}</h3>
<div class="container_12 edit">
    <div class="grid_6 block">
        <fieldset><legend>Edit</legend>    
        {{ form_start(edit_form) }}
        {{ form_errors(edit_form) }}

        {{ form_row(edit_form.name) }}
        {{ form_row(edit_form.category) }}
        {{ form_row(edit_form.idPerson) }}

        {{ form_end(edit_form) }}
        </fieldset>
    </div>
    {% if entity.id %}
    <div class="grid_6 block">
        <fieldset><legend>Alias</legend>
            <p><a href="{{ path('_catalogues_alias_new',{'id_catalogue' : entity.id}) }}"><i class="fa fa-plus-circle fa-3"></i> Add a new alias</a></p>
            {% if entity.alias|length > 0 %}
            <table class="list">
                <tr>
                    <th>Alias</th>
                    <th>Country</th>
                    <th>Description</th>
                </tr>
                {% for alias in entity.alias %}
                <tr>
                    <td><a href="{{ path('_catalogues_alias_edit',{'id_catalogue' : entity.id,'id' : alias.id}) }}">{{ alias.name }}</a></td>
                    <td>{{ alias.country }}</td>
                    <td class="tableText">{{ alias.description|raw }}</td>
                </tr>
                {% endfor %}
            </table>
            {% endif %}
        </fieldset>
    </div>
    <div class="grid_0">
        <fieldset><legend>Oeuvres</legend>
            {% if entity.cataloguesOeuvres|length > 0 %}
            <table class="list">
                <tr>
                    <th>Name</th>
                    <th>Year</th>
                    <th>Origin</th>
                    <th>Format</th>
                    <th>Author</th>
                    <th>Publishing</th>
                </tr>
                {% for co in entity.cataloguesOeuvres %}
                <tr>
                    <td>{{ co.oeuvres.name }}</td>
                    <td>{{ co.oeuvres.date }}</td>
                    <td>{{ co.firstAppearance }}</td>
                    <td>{{ co.oeuvres.format }}</td>
                    <td>
                        {% if co.oeuvres.persons|length > 0 %}
                        <ul>
                            {% for person in co.oeuvres.persons %}
                            <li>{{ person.name }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </td>
                    <td>
                        
                    </td>
                </tr>
                {% endfor %}
            </table>
            {% endif %}
        </fieldset>
    </div>
   {% endif %}
</div>

{% endblock %}
